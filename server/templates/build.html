{{define "title"}}{{.Job.Name}} #{{.Build.ID}} - Winston{{end}}

{{define "body"}}
<div id="build-title" class="{{.Build.Status}}">
  <h1>{{.Job.Name}} #{{.Build.ID}}</h1>
</div>

<ul id="builds">
  {{$job := .Job}}
  {{$currentID := .Build.ID}}
  {{/* don't put whitespace between these; they're display-block */}}
  {{range .Builds}}<li class="{{.Status}}{{if eq .ID $currentID}} current{{end}}"><a href="{{url "GetBuild" $job .}}">{{.ID}}</a></li>{{end}}
</ul>

<div id="metadata">
  {{range .Build.Inputs}}
  <div class="build-source">
    <h3>{{.Name}}</h3>
    <dl class="build-metadata">
      {{range .Metadata}}
      <dt>{{.Name}}</dt>
        <dd>{{.Value}}</dd>
      {{end}}
    </dl>
  </div>
  {{ end }}
</div>

<pre id="build-log"></pre>

<script src="{{url "Public" "jquery-2.1.1.min.js"}}"></script>
<script src="{{url "Public" "build.js"}}"></script>
<script type="text/javascript">
streamLog("ws://" + window.location.hostname + {{url "LogOutput" .Job .Build | js}})
</script>
{{end}}
